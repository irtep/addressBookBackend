(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var o=t(0),r=t(1),a=t.n(r),c=t(14),s=t.n(c),u=(t(20),t(4)),i=function(e){var n=e.name;return Object(o.jsx)("h2",{children:n})},d=function(e){var n=e.actions;return Object(o.jsxs)(o.Fragment,{children:["filter shown with: ",Object(o.jsx)("input",{onChange:n})]})},l=function(e){var n=e.addNew,t=e.handleNameChange,r=e.handleNumberChange;return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("form",{onSubmit:n,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{id:"nameField",onChange:t})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{id:"numberField",type:"number",onChange:r})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})})},m=function(e){var n=e.person;return Object(o.jsxs)(o.Fragment,{children:[n.name," ",n.number]})},b=function(e){var n=e.id,t=e.action,r=e.name;return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("button",{id:n,onClick:t,name:r,children:"delete"})})},f=function(e){var n=e.showThese,t=e.deleteFunc;return Object(o.jsx)(o.Fragment,{children:n.map((function(e){return Object(o.jsxs)("div",{children:[Object(o.jsx)(m,{person:e}),Object(o.jsx)(b,{id:e.id,action:t,name:e.name})]},e.name)}))})},j={color:"green"},g=function(e){var n=e.message;return null===n.msg?null:n.badNews?Object(o.jsx)("div",{className:"notifications",children:n.msg}):Object(o.jsx)("div",{className:"notifications",style:j,children:n.msg})},h=t(3),w=t.n(h),O="/api/persons",p=function(){return w.a.get(O).then((function(e){return e.data}))},N=function(e){return w.a.post(O,e).then((function(e){return e.data}))},v=function(e,n){return w.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},x=function(e,n){return w.a.delete("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},T=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)({name:"",number:""}),s=Object(u.a)(c,2),m=s[0],b=s[1],j=Object(r.useState)([]),h=Object(u.a)(j,2),w=h[0],O=h[1],T=Object(r.useState)({msg:null,badNews:!1}),F=Object(u.a)(T,2),C=F[0],y=F[1];Object(r.useEffect)((function(){p().then((function(e){a(e),O(e)})).catch((function(e){console.log("error",e.response),y({msg:"error: ".concat(e.response.data.error,"!"),badNews:!0}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4)}))}),[]);return Object(o.jsxs)("div",{children:[Object(o.jsx)(i,{name:"Phonebook"}),Object(o.jsx)(g,{message:C}),Object(o.jsx)(d,{actions:function(e){var n=e.target.value.toLowerCase();if(""!==e.target.value){var o=t.filter((function(e){return e.name.toLowerCase().includes(n)}));O(o)}else O(t)}}),Object(o.jsx)(i,{name:"Add a new"}),Object(o.jsx)(l,{addNew:function(e){e.preventDefault();var n={name:m.name,number:m.number},o=t.filter((function(e){return e.name===n.name}));if(""!==m.name&&0===o.length){var r=t.concat(n);a(r),O(r),N(n).catch((function(e){console.log("error",e.response),y({msg:"error: ".concat(e.response.data.error,"!"),badNews:!0}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4)})),y({msg:"added ".concat(n.name,"!"),badNews:!1}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4)}else 0!==o.length&&window.confirm("".concat(m.name," is already added, replace new number with old?"))&&(v(o[0].id,n).then((function(){p().then((function(e){a(e),O(e)})).catch((function(e){console.log("error",e.response),y({msg:"error: ".concat(e.response.data.error,"!"),badNews:!0}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4)}))})).catch((function(e){console.log("error",e.response),y({msg:"error: ".concat(e.response.data.error,"!"),badNews:!0}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4)})),y({msg:"updated number of ".concat(n.name,"!"),badNews:!1}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4));b({name:"",number:""}),document.getElementById("nameField").value="",document.getElementById("numberField").value="",console.log("should reload persons now"),p().then((function(e){console.log("i data: ",e),a(e),O(e)})).catch((function(e){console.log("error",e.response),y({msg:"error: ".concat(e.response.data.error,"!"),badNews:!0}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4)}))},handleNameChange:function(e){var n=m;n.name=e.target.value,b(n)},handleNumberChange:function(e){var n=m;n.number=e.target.value,b(n)}}),Object(o.jsx)(i,{name:"Numbers"}),Object(o.jsx)(f,{showThese:w,deleteFunc:function(e){window.confirm("really delete details of ".concat(e.target.name))&&(x(e.target.id).then((function(){p().then((function(e){a(e),O(e)})).catch((function(e){console.log("error",e.response),y({msg:"error: ".concat(e.response.data.error,"!"),badNews:!0}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4)}))})).catch((function(n){console.log(n),y({msg:"info of ".concat(e.target.name," has already been deleted from database!"),badNews:!0}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4),p().then((function(e){a(e),O(e)})).catch((function(e){console.log("error",e.response),y({msg:"error: ".concat(e.response.data.error,"!"),badNews:!0}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4)}))})),y({msg:"removed details of ".concat(e.target.name,"!"),badNews:!1}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4))}})]})};s.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(T,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.f43a6744.chunk.js.map