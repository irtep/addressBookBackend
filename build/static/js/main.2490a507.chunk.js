(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t(1),o=t.n(a),c=t(14),s=t.n(c),u=(t(20),t(4)),i=function(e){var n=e.name;return Object(r.jsx)("h2",{children:n})},d=function(e){var n=e.actions;return Object(r.jsxs)(r.Fragment,{children:["filter shown with: ",Object(r.jsx)("input",{onChange:n})]})},l=function(e){var n=e.addNew,t=e.handleNameChange,a=e.handleNumberChange;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{id:"nameField",onChange:t})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{id:"numberField",type:"number",onChange:a})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})})},m=function(e){var n=e.person;return Object(r.jsxs)(r.Fragment,{children:[n.name," ",n.number]})},b=function(e){var n=e.id,t=e.action,a=e.name;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("button",{id:n,onClick:t,name:a,children:"delete"})})},f=function(e){var n=e.showThese,t=e.deleteFunc;return Object(r.jsx)(r.Fragment,{children:n.map((function(e){return Object(r.jsxs)("div",{children:[Object(r.jsx)(m,{person:e}),Object(r.jsx)(b,{id:e.id,action:t,name:e.name})]},e.name)}))})},j={color:"green"},h=function(e){var n=e.message;return null===n.msg?null:n.badNews?Object(r.jsx)("div",{className:"notifications",children:n.msg}):Object(r.jsx)("div",{className:"notifications",style:j,children:n.msg})},g=t(3),w=t.n(g),O="/api/persons",p=function(){return w.a.get(O).then((function(e){return e.data}))},N=function(e){return w.a.post(O,e).then((function(e){return e.data}))},x=function(e,n){return w.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},v=function(e,n){return w.a.delete("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},T=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)({name:"",number:""}),s=Object(u.a)(c,2),m=s[0],b=s[1],j=Object(a.useState)([]),g=Object(u.a)(j,2),w=g[0],O=g[1],T=Object(a.useState)({msg:null,badNews:!1}),F=Object(u.a)(T,2),C=F[0],y=F[1];Object(a.useEffect)((function(){p().then((function(e){o(e),O(e)})).catch((function(e){console.log("error",e.response),y({msg:"error: ".concat(e.response.data.error,"!"),badNews:!0}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4)}))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsx)(i,{name:"Phonebook"}),Object(r.jsx)(h,{message:C}),Object(r.jsx)(d,{actions:function(e){var n=e.target.value.toLowerCase();if(""!==e.target.value){var r=t.filter((function(e){return e.name.toLowerCase().includes(n)}));O(r)}else O(t)}}),Object(r.jsx)(i,{name:"Add a new"}),Object(r.jsx)(l,{addNew:function(e){e.preventDefault();var n={name:m.name,number:m.number},r=t.filter((function(e){return e.name===n.name}));""!==m.name&&0===r.length?(N(n).then((function(){p().then((function(e){o(e),O(e)})).catch((function(e){console.log("error",e.response),y({msg:"error: ".concat(e.response.data.error,"!"),badNews:!0}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4)}))})).catch((function(e){console.log("error",e.response),y({msg:"error: ".concat(e.response.data.error,"!"),badNews:!0}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4)})),y({msg:"added ".concat(n.name,"!"),badNews:!1}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4)):0!==r.length&&window.confirm("".concat(m.name," is already added, replace new number with old?"))&&(x(r[0].id,n).then((function(){p().then((function(e){o(e),O(e)})).catch((function(e){console.log("error",e.response),y({msg:"error: ".concat(e.response.data.error,"!"),badNews:!0}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4)}))})).catch((function(e){console.log("error",e.response),y({msg:"error: ".concat(e.response.data.error,"!"),badNews:!0}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4)})),y({msg:"updated number of ".concat(n.name,"!"),badNews:!1}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4)),b({name:"",number:""}),document.getElementById("nameField").value="",document.getElementById("numberField").value=""},handleNameChange:function(e){var n=m;n.name=e.target.value,b(n)},handleNumberChange:function(e){var n=m;n.number=e.target.value,b(n)}}),Object(r.jsx)(i,{name:"Numbers"}),Object(r.jsx)(f,{showThese:w,deleteFunc:function(e){window.confirm("really delete details of ".concat(e.target.name))&&(v(e.target.id).then((function(){p().then((function(e){o(e),O(e)})).catch((function(e){console.log("error",e.response),y({msg:"error: ".concat(e.response.data.error,"!"),badNews:!0}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4)}))})).catch((function(n){console.log(n),y({msg:"info of ".concat(e.target.name," has already been deleted from database!"),badNews:!0}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4),p().then((function(e){o(e),O(e)})).catch((function(e){console.log("error",e.response),y({msg:"error: ".concat(e.response.data.error,"!"),badNews:!0}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4)}))})),y({msg:"removed details of ".concat(e.target.name,"!"),badNews:!1}),setTimeout((function(){y({msg:null,badNews:!1})}),3e4))}})]})};s.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(T,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.2490a507.chunk.js.map