{"version":3,"sources":["components/Header.js","components/Filter.js","components/PersonForm.js","components/Person.js","components/ActionButton.js","components/ShowPersons.js","components/Notification.js","services/dbControl.js","App.js","index.js"],"names":["Header","name","Filter","actions","onChange","PersonForm","addNew","handleNameChange","handleNumberChange","onSubmit","id","type","Person","person","number","ActionButton","action","onClick","ShowPersons","showThese","deleteFunc","map","goodStyle","color","Notification","message","console","log","msg","badNews","className","style","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","persons","setPersons","newName","setNewName","setShow","notificationMsg","setMsg","useEffect","dbServices","initialData","catch","error","event","lowCaseAll","target","value","toLowerCase","showing","filter","includes","preventDefault","noteObject","dublicatedList","pers","length","newList","concat","err","setTimeout","window","confirm","document","getElementById","entryCopied","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.fe42e01e.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Header = ({name}) => {\r\n  return (\r\n    <h2>\r\n      {name}\r\n    </h2>\r\n  )\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react'\r\n\r\nconst Filter = ({actions}) => {\r\n  return (\r\n    <>\r\n      filter shown with: <input onChange= {actions}/>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Filter;\r\n","import React from 'react'\r\n\r\nconst PersonForm = ({addNew, handleNameChange, handleNumberChange}) => {\r\n  return (\r\n    <>\r\n    <form onSubmit= {addNew}>\r\n      <div>name: <input id= \"nameField\" onChange= {handleNameChange}/></div>\r\n      <div>number: <input id= \"numberField\" type= \"number\" onChange= {handleNumberChange}/></div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PersonForm;\r\n","import React from 'react';\r\n\r\nconst Person = ({person}) => {\r\n  return(\r\n    <>\r\n      {person.name} {person.number}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Person;\r\n","import React from 'react';\r\n\r\nconst ActionButton = ({id, action, name}) => {\r\n  return(\r\n    <>\r\n      <button\r\n        id= {id}\r\n        onClick= {action}\r\n        name= {name}>\r\n        delete\r\n      </button>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ActionButton;\r\n","import React from 'react';\r\nimport Person from './Person';\r\nimport ActionButton from './ActionButton';\r\n\r\nconst ShowPersons = ({showThese, deleteFunc}) => {\r\n  return (\r\n    <>\r\n    {showThese.map( person => {\r\n      return(\r\n        <div key= {person.name}>\r\n          <Person\r\n            person= {person}\r\n          />\r\n          <ActionButton\r\n            id= {person.id}\r\n            action= {deleteFunc}\r\n            name= {person.name}\r\n          />\r\n        </div>\r\n       )\r\n    })}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ShowPersons;\r\n","import React from 'react';\r\nconst goodStyle = {\r\n  color: \"green\"\r\n}\r\n\r\nconst Notification = ({ message }) => {\r\n  console.log('this pops', message);\r\n  if (message.msg === null) {\r\n    return null\r\n  } else {\r\n    if (message.badNews) {\r\n      return (\r\n        <div className=\"notifications\">\r\n          {message.msg}\r\n        </div>\r\n      )\r\n    } else {\r\n      return (\r\n        <div className=\"notifications\" style= {goodStyle}>\r\n          {message.msg}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nexport default Notification;\r\n","import axios from 'axios';\r\nconst baseUrl = 'http://localhost:3001/api/persons';\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst erase = (id, newObject) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, erase };\r\n","import React, { useState, useEffect } from 'react';\r\nimport Header from './components/Header';\r\nimport Filter from './components/Filter';\r\nimport PersonForm from './components/PersonForm';\r\nimport ShowPersons from './components/ShowPersons';\r\nimport Notification from './components/Notification';\r\nimport dbServices from './services/dbControl';\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([]);\r\n  const [ newName, setNewName ] = useState({name: '', number: ''});\r\n  const [ showThese, setShow ] = useState([]);\r\n  const [ notificationMsg, setMsg] = useState({msg: null, badNews: false});\r\n\r\n  // get persons from db on start\r\n  useEffect( () => {\r\n    dbServices\r\n      .getAll()\r\n      .then(initialData => {\r\n        console.log('ini data: ', initialData);\r\n        setPersons(initialData)\r\n        setShow(initialData)\r\n      })\r\n      .catch(error => {\r\n        console.log('error on loading database!', error);\r\n    })\r\n  }, []);\r\n\r\n  // handle changes\r\n  const handleNameChange = (event) => {\r\n    const entryCopied = newName;\r\n    entryCopied.name = event.target.value;\r\n    setNewName(entryCopied);\r\n  }\r\n  const handleNumberChange = (event) => {\r\n    const entryCopied = newName;\r\n    entryCopied.number = event.target.value;\r\n    setNewName(entryCopied);\r\n  }\r\n\r\n  // add new entry\r\n  const addNew = (event) => {\r\n    event.preventDefault();\r\n    const noteObject = {\r\n      name: newName.name,\r\n      number: newName.number\r\n    }\r\n    const dublicatedList = persons.filter( pers => pers.name === noteObject.name);\r\n\r\n    if (newName.name !== '' && dublicatedList.length === 0){\r\n      // not dublicated, can add\r\n      const newList = persons.concat(noteObject);\r\n      setPersons(newList);\r\n      setShow(newList);\r\n      // update to db\r\n      dbServices.create(noteObject).catch(err => console.log('error on adding to database!', err));\r\n      // make notification\r\n      setMsg({msg: `added ${noteObject.name}!`, badNews: false});\r\n      setTimeout( () => { setMsg({msg: null, badNews: false}) }, 2000);\r\n    } else if (dublicatedList.length !== 0){\r\n      //alert(`${newName.name} is already added`);\r\n      //\r\n      if (window.confirm(`${newName.name} is already added, replace new number with old?`)) {\r\n        dbServices.update(dublicatedList[0].id, noteObject)\r\n         .then( () => {\r\n           // reload modified db\r\n           dbServices\r\n             .getAll()\r\n             .then(initialData => {\r\n               setPersons(initialData)\r\n               setShow(initialData)\r\n             })\r\n             .catch(error => {\r\n               console.log('error on loading database!', error);\r\n           })\r\n         }\r\n       ).catch(err => console.log('error on adding to database!', err));\r\n       // make notification\r\n       setMsg({msg: `updated number of ${noteObject.name}!`, badNews: false});\r\n       setTimeout( () => { setMsg({msg: null, badNews: false}) }, 2000);\r\n      }\r\n    }\r\n    setNewName({name: '', number: ''});\r\n    // empty fields\r\n    document.getElementById('nameField').value = '';\r\n    document.getElementById('numberField').value = '';\r\n  }\r\n\r\n  // filter what to show\r\n  const filtering = (event) => {\r\n    const lowCaseAll = event.target.value.toLowerCase();\r\n    if (event.target.value !== '') {\r\n      const showing = persons.filter( person => person.name.toLowerCase().includes(lowCaseAll));\r\n      setShow(showing);\r\n    } else {\r\n      setShow(persons);\r\n    }\r\n  }\r\n\r\n  // delete function\r\n  const deleteThis = (event) => {\r\n    if (window.confirm(`really delete details of ${event.target.name}`)) {\r\n      // delete\r\n      dbServices.erase(event.target.id)\r\n       .then( () => {\r\n         // reload modified db\r\n         dbServices\r\n           .getAll()\r\n           .then(initialData => {\r\n             setPersons(initialData)\r\n             setShow(initialData)\r\n           })\r\n           .catch(error => {\r\n             console.log('error on loading database!', error);\r\n         })\r\n       })\r\n      .catch(err => {\r\n        console.log(err);\r\n        // make notification\r\n        setMsg({msg: `info of ${event.target.name} has already been deleted from database!`, badNews: true});\r\n        setTimeout( () => { setMsg({msg: null, badNews: false}) }, 5000);\r\n          // reload modified db\r\n          dbServices\r\n            .getAll()\r\n            .then(initialData => {\r\n              setPersons(initialData)\r\n              setShow(initialData)\r\n            })\r\n            .catch(error => {\r\n              console.log('error on loading database!', error);\r\n          })\r\n      });\r\n      // make notification\r\n      setMsg({msg: `removed details of ${event.target.name}!`, badNews: false});\r\n      setTimeout( () => { setMsg({msg: null, badNews: false}) }, 2000);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n        <Header name= \"Phonebook\"/>\r\n\r\n        <Notification message= {notificationMsg}/>\r\n\r\n        <Filter actions= {filtering}/>\r\n\r\n        <Header name= \"Add a new\"/>\r\n\r\n        <PersonForm\r\n          addNew= {addNew}\r\n          handleNameChange= {handleNameChange}\r\n          handleNumberChange= {handleNumberChange}\r\n        />\r\n\r\n       <Header name= \"Numbers\"/>\r\n\r\n       <ShowPersons\r\n         showThese= {showThese}\r\n         deleteFunc= {deleteThis}/>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}